{% extends "shared/_layout.html" %}
{% block main_content %}

    <div class="search-inputs">
        <h1>{{category}} collection</h1>
        <input
                name="search_text"
                placeholder="Search for a video ..."
                class="form-control"
                type="text"
                value="{{ search_text or '' }}"
                hx-get="/videos/search"
                hx-trigger="keyup changed delay:250ms"
                hx-target="#search-results"
                hx-push-url="true">

    </div>

    <div class="videos search-results" id="search-results">

<!--        {% if search_text %}-->
<!--            {{  render_partial('videos/partials/search_results.html', videos=videos) }}-->
<!--        {% endif %}-->
        <div class="search-result-count">{{ feeds | length }} results</div>
        <div class="container">
            {% for feed in feeds %}
                {% if feed %}
                <div class="row search-result-row">
                    <div class="col-md-2"></div>
                    <div class="video search-result col-md-3 text-center">
                        <a href="{{ feed.url }}">
                            <img src="{{feed.thumbnail_url or url_for('static', filename='/image/source_categories/' + feed.source.source_category.name + '.png') }}"
                                 class="img img-responsive {{ ' '.join(classes) }}"
                                 alt="{{ feed.title }}"
                                 title="{{ feed.title }}"
                                 height="130px"
                            >
                        </a>
                    </div>
                    <div class="video search-result col-md-6 my-auto">
                            <div><a href="{{ feed.url }}" class="h5 font-weight-bold">{{ feed.title }}</a></div>
                            <div><span class="author">{{ feed.source.target_name }}</span></div>
                            <div>{{ feed.published_string }} views</div>
                    </div>
                    <div class="col-md-1"></div>
                </div>
                {% endif%}
            {% endfor %}
        </div>

    </div>

{% endblock %}

{% block title %}Search @ Video Collector{% endblock %}